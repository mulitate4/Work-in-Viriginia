<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <title>Login Form</title>
    <link rel="stylesheet" href="static/css/login-signup.css" />
  </head>

  <body>
    <div class="center">
      <h2>Login to Virgina-Tech</h2>

      <form method="post" onsubmit="return false;">
        <div class="txt_field">
          <input type="text" class="email" required />
          <span></span>
          <label>Email</label>
        </div>

        <div class="txt_field">
          <input type="password" class="password" required />
          <span></span>
          <label>Password</label>
        </div>

        <button class="submit" onclick="login()">LOGIN</button>

        <div class="signup_link">
          Need an account? <a href="/register">Register</a>
        </div>

      </form>
    </div>

    <script src="{{ url_for('static', path='/js/misc_functions.js')}}"></script>
    <script>
      async function login() {
        data = {
          email: $(".email").value,
          password: $(".password").value
        };

        data = await request(
          window.location.protocol + "//" + window.location.host + "/api/login", 
          "POST",
          {"Content-Type": "application/json"},
          data
        )

        if (data == null)
          return
        
        redirect("dashboard/hackathons")
      }
    </script>
  </body>
</html>
